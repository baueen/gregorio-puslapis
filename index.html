<!DOCTYPE html>
<html lang="lt">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover"/>
  <title>Mums üíñ</title>

  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@500;600;700&family=Poppins:wght@300;400;500;600;700&family=Pacifico&display=swap" rel="stylesheet">
  <!-- Prijungiamas Dancing Script ≈°riftas para≈°ams -->
  <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&display=swap" rel="stylesheet">

  <!-- Confetti -->
  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

  <!-- Firebase v10 compat -->
  <script src="https://www.gstatic.com/firebasejs/10.13.1/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.13.1/firebase-firestore-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.13.1/firebase-auth-compat.js"></script>

  <style>
    :root {
      --primary-gradient: linear-gradient(135deg, #ff4d6d, #ff758f);
      --glass-bg: rgba(255, 255, 255, 0.25);
      --glass-border: 1px solid rgba(255, 255, 255, 0.3);
      --glass-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.15);
      --bottom-nav-height: 80px;
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
      -webkit-tap-highlight-color: transparent;
    }

    html, body {
      width: 100%;
      height: 100%;
      overflow-x: hidden;
      overscroll-behavior-y: none;
    }

    body {
      min-height: 100vh;
      display: block;
      background: radial-gradient(circle at top, #ffd4a3 0%, #f8a5c2 25%, #e88eb5 55%, #c89dd6 85%, #9b72b0 100%);
      background-size: 200% 200%;
      background-attachment: fixed;
      animation: bgMove 25s ease-in-out infinite;
      font-family: "Poppins", sans-serif;
      position: relative;
      color: #fff;
    }

    /* ========== ANIMATIONS ========== */ 
    @keyframes bgMove {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }

    @keyframes slideUpFade {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }

    @keyframes float {
      0%, 100% { transform: translateY(0px); }
      50% { transform: translateY(-10px); }
    }
    
    @keyframes heartbeat {
      0%,100% { transform: scale(1); }
      25% { transform: scale(1.1); }
      50% { transform: scale(1); }
      75% { transform: scale(1.15); }
    }
    
    @keyframes signAnim {
      0% { stroke-dashoffset: 1000; opacity: 0; }
      100% { stroke-dashoffset: 0; opacity: 1; }
    }

    /* ========== LOGIN SCREEN ========== */
    #loginScreen {
      position: fixed;
      inset: 0;
      background: inherit;
      z-index: 9999;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 20px;
      transition: opacity 0.5s ease, transform 0.5s ease;
    }

    #loginScreen.hidden {
      opacity: 0;
      pointer-events: none;
      transform: scale(1.1);
    }

    .login-glass {
      background: rgba(255, 255, 255, 0.2);
      backdrop-filter: blur(25px) saturate(180%);
      border-radius: 30px;
      border: var(--glass-border);
      padding: 40px 30px;
      width: 100%;
      max-width: 380px;
      text-align: center;
      box-shadow: 0 20px 50px rgba(0,0,0,0.2);
      animation: slideUpFade 0.6s cubic-bezier(0.2, 0.8, 0.2, 1);
    }

    .login-emoji { font-size: 64px; margin-bottom: 10px; animation: float 3s ease-in-out infinite; }
    .login-title { font-family: "Playfair Display", serif; font-size: 28px; margin-bottom: 5px; color: #3a1032; text-shadow: 0 2px 10px rgba(255,255,255,0.5); }
    .login-subtitle { font-size: 14px; opacity: 0.9; margin-bottom: 30px; color: #5a4555; }

    .input-group { margin-bottom: 20px; text-align: left; }
    .input-label { font-size: 12px; font-weight: 600; text-transform: uppercase; letter-spacing: 1px; color: #3a1032; margin-bottom: 8px; display: block; }
    
    .glass-input {
      width: 100%;
      padding: 15px;
      background: rgba(255, 255, 255, 0.8);
      border: 2px solid transparent;
      border-radius: 15px;
      font-size: 16px;
      outline: none;
      transition: 0.3s;
      color: #3a1032;
      font-family: inherit;
    }
    .glass-input:focus { background: #fff; border-color: #ff758f; transform: translateY(-2px); box-shadow: 0 5px 15px rgba(255, 117, 143, 0.2); }

    .btn-primary {
      width: 100%;
      padding: 16px;
      background: var(--primary-gradient);
      border: none;
      border-radius: 18px;
      color: white;
      font-size: 16px;
      font-weight: 700;
      letter-spacing: 1px;
      text-transform: uppercase;
      cursor: pointer;
      box-shadow: 0 10px 20px rgba(255, 77, 109, 0.3);
      transition: 0.2s;
    }
    .btn-primary:active { transform: scale(0.98); }

    /* ========== PROPOSAL SCREEN ========== */
    #proposalScreen {
      position: fixed;
      inset: 0;
      background: inherit;
      z-index: 8000;
      display: none; /* Hidden by default */
      align-items: center;
      justify-content: center;
      padding: 20px;
      transition: opacity 0.5s ease;
    }

    .proposal-card {
      background: rgba(255, 255, 255, 0.25);
      backdrop-filter: blur(30px) saturate(180%);
      border-radius: 30px;
      padding: 40px 30px;
      width: 90%;
      max-width: 400px;
      text-align: center;
      box-shadow: 0 25px 60px rgba(0,0,0,0.3);
      border: 2px solid rgba(255,255,255,0.4);
      animation: slideUpFade 0.6s cubic-bezier(0.34, 1.56, 0.64, 1);
    }

    .proposal-emoji img { 
      width: 120px; 
      height: 120px; 
      border-radius: 20px; 
      margin-bottom: 20px; 
      box-shadow: 0 10px 20px rgba(0,0,0,0.2); 
    }

    .proposal-buttons { 
      display: flex; 
      gap: 15px; 
      justify-content: center; 
      margin-top: 30px; 
      position: relative;
      height: 60px;
    }

    #yesBtn {
      background: #ff4d6d;
      color: white;
      border: none;
      border-radius: 18px;
      width: 120px;
      min-height: 44px;
      font-weight: 700;
      font-size: 16px;
      cursor: pointer;
      box-shadow: 0 10px 20px rgba(255, 77, 109, 0.3);
    }

    #noBtn {
      background: #fff;
      color: #333;
      border: none;
      border-radius: 18px;
      width: 100px;
      position: absolute;
      left: 50%;
      transform: translateX(70px);
      box-shadow: 0 5px 15px rgba(0,0,0,0.1);
      min-height: 44px;
      cursor: pointer;
      font-weight: 600;
      transition: all 0.2s;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      font-size: 14px;
      touch-action: manipulation;
    }

    /* ========== MAIN LAYOUT ========== */
    .main-content { display: none; min-height: 100vh; padding-bottom: calc(var(--bottom-nav-height) + 20px); }
    .main-content.visible { display: block; }

    /* Navigation - Responsive Logic */
    .nav-container {
      position: fixed;
      z-index: 1000;
      transition: all 0.3s ease;
    }

    /* Desktop Nav */
    @media (min-width: 769px) {
      .nav-container {
        top: 20px;
        left: 50%;
        transform: translateX(-50%);
        background: rgba(255, 255, 255, 0.25);
        backdrop-filter: blur(20px);
        padding: 8px 10px;
        border-radius: 50px;
        border: var(--glass-border);
        display: flex;
        gap: 8px;
        box-shadow: var(--glass-shadow);
      }
      .nav-item {
        padding: 12px 30px;
        border-radius: 30px;
        cursor: pointer;
        font-weight: 700;
        transition: 0.3s;
        color: white;
        text-transform: uppercase;
        font-size: 13px;
        letter-spacing: 1px;
        background: transparent;
        border: none;
        white-space: nowrap;
      }
      .nav-item.active {
        background: var(--primary-gradient);
        box-shadow: 0 4px 15px rgba(255, 77, 109, 0.4);
        transform: translateY(-2px);
      }
      .nav-item:hover:not(.active) {
        background: rgba(255, 255, 255, 0.2);
      }
      .nav-icon { display: none; }
      
      .dashboard {
        max-width: 1100px;
        margin: 110px auto 0;
        display: grid;
        grid-template-columns: 320px 1fr;
        gap: 40px;
        padding: 0 30px;
        align-items: start;
      }
      
      /* On Desktop, Spotify and Quick Links are in Sidebar */
      .sidebar { display: flex; flex-direction: column; gap: 20px; position: sticky; top: 110px; }
      .center-content { min-height: 500px; }
    }

    /* Mobile Nav */
    @media (max-width: 768px) {
      .nav-container {
        bottom: 20px;
        left: 20px;
        right: 20px;
        background: rgba(255, 255, 255, 0.25);
        backdrop-filter: blur(25px) saturate(180%);
        border: var(--glass-border);
        border-radius: 25px;
        display: flex;
        justify-content: space-around;
        align-items: center;
        height: 70px;
        box-shadow: 0 10px 30px rgba(0,0,0,0.2);
      }
      
      .nav-item {
        flex: 1;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        background: transparent;
        border: none;
        color: rgba(255,255,255,0.7);
        font-size: 10px;
        font-weight: 600;
        padding: 0;
        gap: 4px;
        transition: 0.2s;
      }

      .nav-item.active {
        color: #fff;
        transform: translateY(-2px);
      }
      
      .nav-icon {
        font-size: 22px;
        display: block;
        margin-bottom: 2px;
        filter: drop-shadow(0 2px 4px rgba(0,0,0,0.1));
      }

      .dashboard {
        display: flex;
        flex-direction: column;
        padding: 20px 15px 100px 15px; /* Bottom padding for nav */
        gap: 20px;
        margin-top: 0;
      }
      
      .sidebar { display: none; } /* Hide sidebar on mobile, move content to main */
      
      /* On Mobile, Spotify is inside Home section */
      .mobile-only { display: block !important; }
      .desktop-only { display: none !important; }
    }

    /* ========== COMPONENTS ========== */
    .card {
      background: var(--glass-bg);
      backdrop-filter: blur(20px);
      border: var(--glass-border);
      border-radius: 30px;
      padding: 30px;
      box-shadow: var(--glass-shadow);
      margin-bottom: 25px;
      animation: slideUpFade 0.5s ease;
      position: relative;
      overflow: hidden;
    }

    /* Content Sections */
    .content-section { display: none; }
    .content-section.active { display: block; animation: slideUpFade 0.4s ease; }

    /* Holaa Header */
    .holaa-header {
      text-align: center;
      padding: 60px 20px;
      margin-bottom: 25px;
      border-radius: 35px;
      background: linear-gradient(135deg, rgba(255,255,255,0.3), rgba(255,255,255,0.1));
      border: 1px solid rgba(255,255,255,0.3);
      box-shadow: 0 15px 40px rgba(0,0,0,0.1);
    }
    .holaa-title {
      font-family: 'Pacifico', cursive;
      font-size: clamp(3.5rem, 12vw, 6rem);
      margin: 0;
      color: #fff;
      text-shadow: 0 4px 15px rgba(0,0,0,0.2);
      transform: rotate(-3deg);
      line-height: 1.2;
    }

    /* Envelope */
    .envelope-wrapper { perspective: 1000px; cursor: pointer; }
    .envelope {
      background: linear-gradient(135deg, rgba(255, 107, 157, 0.4), rgba(255, 154, 158, 0.3));
      border: 1px solid rgba(255,255,255,0.3);
      border-radius: 25px;
      overflow: hidden;
      transition: transform 0.3s;
    }
    .envelope:active { transform: scale(0.98); }
    .flap {
      background: rgba(255,255,255,0.15);
      padding: 25px;
      text-align: center;
      font-weight: 700;
      font-size: 18px;
      border-bottom: 1px solid rgba(255,255,255,0.1);
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
      text-transform: uppercase;
      letter-spacing: 1px;
    }
    .letter-body {
      max-height: 0;
      opacity: 0;
      overflow: hidden;
      transition: all 0.6s cubic-bezier(0.4, 0, 0.2, 1);
      background: rgba(0,0,0,0.1);
    }
    .envelope.open .letter-body {
      max-height: 2000px;
      opacity: 1;
      padding: 40px 30px;
    }
    .letter-text {
      font-size: 16px;
      line-height: 1.9;
      color: #fff;
      text-shadow: 0 1px 2px rgba(0,0,0,0.2);
    }

    /* Contract */
    .contract-text {
      font-size: 15px;
      line-height: 1.8;
      background: rgba(0,0,0,0.1);
      padding: 25px;
      border-radius: 20px;
      margin-bottom: 25px;
      border-left: 4px solid #ff758f;
    }
    .signature-row { display: flex; gap: 15px; flex-wrap: wrap; }
    .sign-box {
      flex: 1;
      min-width: 140px;
      background: rgba(255,255,255,0.1);
      border: 2px dashed rgba(255,255,255,0.3);
      border-radius: 20px;
      padding: 20px;
      text-align: center;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      min-height: 120px;
      cursor: pointer;
      transition: 0.2s;
      position: relative;
    }
    .sign-box:active { transform: scale(0.98); background: rgba(255,255,255,0.15); }

    /* Stilius para≈°ui */
    .signature-result {
      font-family: 'Dancing Script', cursive;
      font-size: 28px;
      color: #fff;
      text-shadow: 0 2px 4px rgba(0,0,0,0.3);
      transform: rotate(-5deg);
      display: none; /* Paslƒópta prad≈æioje */
    }
    .signature-date {
      font-family: 'Poppins', sans-serif;
      font-size: 10px;
      opacity: 0.6;
      margin-top: 5px;
      display: none;
    }
    .sign-placeholder {
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    /* Memories */
    .grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(100px, 1fr)); gap: 15px; }
    .grid-item {
      aspect-ratio: 1;
      background: rgba(255,255,255,0.15);
      border-radius: 20px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 32px;
      border: 1px solid rgba(255,255,255,0.2);
      box-shadow: 0 4px 10px rgba(0,0,0,0.1);
    }

    /* Chat */
    .chat-container { height: 350px; overflow-y: auto; margin-bottom: 15px; padding-right: 5px; display: flex; flex-direction: column; gap: 12px; }
    .chat-msg { 
      background: rgba(255,255,255,0.2); 
      padding: 12px 18px; 
      border-radius: 20px; 
      border-bottom-left-radius: 4px;
      max-width: 85%;
      align-self: flex-start;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    }
    .chat-msg.mine {
      background: #ff758f;
      border-bottom-left-radius: 20px;
      border-bottom-right-radius: 4px;
      align-self: flex-end;
    }
    .chat-time { font-size: 10px; opacity: 0.7; margin-top: 5px; display: block; text-align: right; }
    .chat-input-area { display: flex; gap: 10px; position: relative; }
    .chat-input { flex: 1; padding: 16px 20px; border-radius: 25px; border: none; outline: none; background: rgba(255,255,255,0.9); font-family: inherit; box-shadow: 0 4px 10px rgba(0,0,0,0.1); }
    .chat-send { width: 50px; height: 50px; border-radius: 50%; border: none; background: #ff758f; color: white; cursor: pointer; display: flex; align-items: center; justify-content: center; font-size: 20px; box-shadow: 0 4px 10px rgba(0,0,0,0.2); transition: 0.2s; }
    .chat-send:active { transform: scale(0.9); }

    /* List Items */
    .list-item {
      padding: 18px;
      background: rgba(255,255,255,0.1);
      border-radius: 18px;
      display: flex;
      align-items: center;
      gap: 15px;
      cursor: pointer;
      transition: 0.2s;
      margin-bottom: 10px;
      border: 1px solid rgba(255,255,255,0.1);
    }
    .list-item:active { transform: scale(0.98); background: rgba(255,255,255,0.2); }
    .item-icon { font-size: 24px; }
    .item-text { font-size: 15px; font-weight: 600; }

    /* Modals */
    .modal-overlay {
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.6);
      backdrop-filter: blur(8px);
      z-index: 2000;
      display: flex;
      align-items: center;
      justify-content: center;
      opacity: 0;
      pointer-events: none;
      transition: 0.3s;
    }
    .modal-overlay.active { opacity: 1; pointer-events: all; }
    
    .modal-card {
      background: #3a1032; /* Solid dark bg for contrast */
      background: linear-gradient(135deg, #4a192c, #2a1025);
      width: 90%;
      max-width: 450px;
      border-radius: 35px;
      padding: 35px;
      position: relative;
      transform: scale(0.9);
      transition: 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
      box-shadow: 0 25px 80px rgba(0,0,0,0.5);
      color: white;
      border: 2px solid rgba(255,255,255,0.1);
      max-height: 85vh;
      overflow-y: auto;
    }
    .modal-overlay.active .modal-card { transform: scale(1); }
    
    @media (max-width: 768px) {
      .modal-overlay { align-items: flex-end; } 
      .modal-card {
        width: 100%;
        max-width: 100%;
        border-bottom-left-radius: 0;
        border-bottom-right-radius: 0;
        margin-bottom: 0;
        transform: translateY(100%);
        border-radius: 35px 35px 0 0;
        padding-bottom: 40px; /* Safe area */
      }
      .modal-overlay.active .modal-card { transform: translateY(0); }
    }

    .modal-close {
      position: absolute;
      top: 20px;
      right: 20px;
      background: rgba(255,255,255,0.1);
      border: none;
      width: 40px;
      height: 40px;
      border-radius: 50%;
      color: white;
      font-size: 20px;
      cursor: pointer;
      z-index: 10;
    }
    
    /* Spotify Wrapper */
    .spotify-wrapper {
      position: relative;
      width: 100%;
      height: 380px;
      border-radius: 20px;
      overflow: hidden;
      box-shadow: 0 10px 30px rgba(0,0,0,0.3);
    }
    @media (max-width: 768px) {
      .spotify-wrapper { height: 352px; }
    }

    /* Date Inputs */
    .date-inputs { display: flex; gap: 10px; margin-top: 20px; flex-wrap: wrap; }
    .date-input { 
      flex: 1; 
      min-width: 120px;
      padding: 14px; 
      border-radius: 15px; 
      border: 1px solid rgba(255,255,255,0.3); 
      background: rgba(255,255,255,0.1); 
      color: white;
      font-family: inherit;
      outline: none;
    }
    .date-input::placeholder { color: rgba(255,255,255,0.5); }
    
    /* Utilities */
    .mobile-only { display: none; }
    @media (max-width: 768px) { .mobile-only { display: block; } }

  </style>
</head>

<body>

  <!-- LOGIN SCREEN -->
  <div id="loginScreen">
    <div class="login-glass">
      <div class="login-emoji">üíñ</div>
      <h1 class="login-title">Sveiki atvykƒô</h1>
      <p class="login-subtitle">≈†i erdvƒó skirta tik dviem ≈æmonƒóms</p>

      <form id="loginForm">
        <div class="input-group">
          <label class="input-label">Vardas</label>
          <input type="text" id="usernameInput" class="glass-input" placeholder="Pats gra≈æiausias vardas yra..." autocomplete="off">
        </div>
        <div class="input-group">
          <label class="input-label">Slapta≈æodis</label>
          <input type="password" id="passwordInput" class="glass-input" placeholder="Koks ten mano skaiƒçius?" autocomplete="off">
        </div>
        <button type="submit" class="btn-primary">Prisijungti üöÄ</button>
      </form>
      <div id="loginError" style="margin-top:15px; color:#ffb3c1; font-size:13px; font-weight:700; display:none; text-shadow: 0 1px 2px rgba(0,0,0,0.2);">Neteisingi duomenys üôà</div>
    </div>
  </div>

  <!-- PROPOSAL SCREEN -->
  <div id="proposalScreen">
    <div class="proposal-card">
      <div class="proposal-emoji">
        <img src="https://media.tenor.com/Hy46hpiHuj0AAAAM/waiting.gif" alt="Cute waiting">
      </div>
      <h2 style="font-family:'Playfair Display'; font-size:24px; margin-bottom:10px; color:#3a1032;">Bernadeta,</h2>
      <p style="opacity:0.9; line-height:1.5; font-style: italic; color:#5a4555;">
        Ar sutinki tapti mano mergina ir pradƒóti ≈°iƒÖ kelionƒô kartu? üåπ
      </p>

      <div class="proposal-buttons">
        <button id="yesBtn">TAIP! üíñ</button>
        <button id="noBtn">Ne...</button>
      </div>
      <p style="font-size:11px; margin-top:30px; opacity:0.6; color:#5a4555;">‚ÄûJei net mygtukas ‚ÄûNe" bƒóga nuo tavƒôs, vadinasi likimas labai ai≈°kiai sako ‚Äûtaip"." - Grƒógoris‚ú®</p>
    </div>
  </div>

  <!-- MAIN APP CONTENT -->
  <div id="mainContent" class="main-content">
    
    <!-- NAVIGATION -->
    <nav class="nav-container">
      <button class="nav-item active" onclick="navTo('home')">
        <span class="nav-icon">üè†</span>
        <span>Pagrindinis</span>
      </button>
      <button class="nav-item" onclick="navTo('contract')">
        <span class="nav-icon">üìú</span>
        <span>Sutartis</span>
      </button>
      <button class="nav-item" onclick="navTo('memories')">
        <span class="nav-icon">üì∏</span>
        <span>Foto</span>
      </button>
      <button class="nav-item" onclick="navTo('chat')">
        <span class="nav-icon">üíå</span>
        <span>Chat</span>
      </button>
    </nav>

    <div class="dashboard">
      
      <!-- SIDEBAR (Desktop Only) -->
      <div class="sidebar desktop-only">
        <div class="card" style="padding:0; overflow:hidden;">
          <div class="spotify-wrapper">
            <iframe src="https://open.spotify.com/embed/track/0qOnSQQF0yzuPWsXrQ9paz?utm_source=generator" width="100%" height="100%" frameBorder="0" allowfullscreen="" allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture" loading="lazy"></iframe>
          </div>
        </div>

        <div class="card">
           <h3 style="margin-bottom:20px; font-family:'Playfair Display'; text-align:center;">Nuorodos ‚ú®</h3>
           <div class="list-item" onclick="openModal('dateModal')">
             <span class="item-icon">üìÖ</span>
             <span class="item-text">Pirmoji data</span>
           </div>
           <div class="list-item" onclick="openModal('importantModal')">
             <span class="item-icon">üéÇ</span>
             <span class="item-text">Svarbios datos</span>
           </div>
        </div>
      </div>

      <!-- MAIN CONTENT AREA -->
      <div class="center-content">
        
        <!-- HOME SECTION -->
        <div id="section-home" class="content-section active">
          <div class="holaa-header">
            <h1 class="holaa-title">Holaa!</h1>
          </div>

          <div class="card envelope-wrapper" onclick="toggleLetter()">
            <div class="envelope" id="envelope">
              <div class="flap">
                <span>üíå Atidaryti lai≈°kƒÖ</span>
              </div>
              <div class="letter-body">
                <p class="letter-text">
                  <strong>Bernadeta,</strong><br><br>
                  Nuo pat pirmos akimirkos, kai tave pamaƒçiau, ≈æinojau, kad esi ypatinga. Tavo ≈°ypsena, tavo juokas, tavo buvimas ≈°alia ‚Äì visa tai mano pasaulƒØ daro ry≈°kesniu. ‚ú®<br><br>
                  A≈° pa≈æadu ne tik b≈´ti tavo vaikinu, bet ir geriausiu draugu. Pa≈æadu klausytis, palaikyti ir visada rasti prie≈æastƒØ tave prajuokinti. Noriu kurti prisiminimus, keliauti, valgyti skan≈≥ maistƒÖ ir tiesiog mƒógautis gyvenimu dviese.<br><br>
                  Aƒçi≈´, kad pasirinkai mane. A≈° tave beproti≈°kai branginu. ‚ù§Ô∏è<br><br>
                </p>
              </div>
            </div>
          </div>

          <!-- Mobile Only: Content that moves from sidebar -->
          <div class="mobile-only">
            <div class="card" style="padding:0; overflow:hidden; margin-top:30px;">
              <div class="spotify-wrapper">
                <iframe src="https://open.spotify.com/embed/track/0qOnSQQF0yzuPWsXrQ9paz?utm_source=generator" width="100%" height="100%" frameBorder="0" allowfullscreen="" allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture" loading="lazy"></iframe>
              </div>
            </div>

            <div class="card">
              <h3 style="margin-bottom:15px; text-align:center;">Nuorodos</h3>
              <div class="list-item" onclick="openModal('dateModal')">
                <span class="item-icon">üìÖ</span>
                <span class="item-text">M≈´s≈≥ pirmoji data</span>
                <span style="margin-left:auto; font-size:12px; opacity:0.7;">2026.01.21</span>
              </div>
              <div class="list-item" onclick="openModal('importantModal')">
                <span class="item-icon">‚ú®</span>
                <span class="item-text">Svarbios datos</span>
              </div>
            </div>
          </div>
        </div>

        <!-- CONTRACT SECTION -->
        <div id="section-contract" class="content-section">
          <div class="card">
            <h2 style="text-align:center; font-family:'Playfair Display'; margin-bottom:25px; font-size:28px;">M≈´s≈≥ Ma≈æa Sutartis ü§ù</h2>
            <div class="contract-text">
              <strong>Mes, ≈æemiau pasira≈°iusieji, pasi≈æadame:</strong><br><br>
              1. Visada pasakyti "Labas rytas" ir "Labanakt", net jei pykstamƒós.<br>
              2. Niekada neiti miegoti su nuoskaudomis.<br>
              3. Dalintis skaniu maistu (bent jau vienu kƒÖsniu, jei labai skanu).<br>
              4. Palaikyti vienas kito svajones, kad ir kokios didelƒós jos b≈´t≈≥.<br>
              5. Mylƒóti vienas kitƒÖ net tada, kai esame "bumbekliai".<br><br>
              <em>Mes esame komanda. Prie≈° visƒÖ pasaulƒØ. üåç‚ù§Ô∏è</em>
            </div>
            
            <div class="signature-row">
              <!-- Bernadeta Signature Box -->
              <div class="sign-box" id="signBernadetaBtn">
                <!-- Content before signing -->
                <div class="sign-placeholder" id="placeholderBernadeta">
                  <div style="font-weight:700; color:#ff9a9e; font-size:18px; margin-bottom:5px;">Bernadeta</div>
                  <div style="font-size:12px; opacity:0.7;">Paspausk, kad pasira≈°ytum ‚úçÔ∏è</div>
                </div>
                <!-- Content after signing -->
                <div class="signature-result" id="sigBernadeta">Bernadeta üíñ</div>
                <div class="signature-date" id="dateBernadeta"></div>
              </div>

              <!-- Orestas Signature Box -->
              <div class="sign-box" id="signOrestasBtn">
                 <!-- Content before signing -->
                 <div class="sign-placeholder" id="placeholderOrestas">
                  <div style="font-weight:700; color:#a18cd1; font-size:18px; margin-bottom:5px;">Orestas</div>
                  <div style="font-size:12px; opacity:0.7;">Paspausk, kad pasira≈°ytum ‚úçÔ∏è</div>
                </div>
                <!-- Content after signing -->
                <div class="signature-result" id="sigOrestas">Orestas ‚úíÔ∏è</div>
                <div class="signature-date" id="dateOrestas"></div>
              </div>
            </div>
          </div>
        </div>

        <!-- MEMORIES SECTION -->
        <div id="section-memories" class="content-section">
          <div class="card" style="text-align:center;">
            <h2 style="margin-bottom:10px; font-family:'Playfair Display';">Prisiminim≈≥ Siena üì∏</h2>
            <p style="margin-bottom:30px; opacity:0.8;">ƒåia bus visos m≈´s≈≥ gra≈æiausios akimirkos</p>
            
            <button class="btn-primary" style="margin-bottom:30px; width:auto; padding:12px 30px;">+ Pridƒóti nuotraukƒÖ</button>
            
            <div class="grid">
              <div class="grid-item">ü•∞</div>
              <div class="grid-item">üèñÔ∏è</div>
              <div class="grid-item">üçï</div>
              <div class="grid-item">üéâ</div>
              <div class="grid-item">üöó</div>
              <div class="grid-item">‚ùÑÔ∏è</div>
            </div>
            <p style="font-size:12px; margin-top:20px; opacity:0.5; font-style:italic;">Kraunamos nuotraukos...</p>
          </div>
        </div>

        <!-- CHAT SECTION -->
        <div id="section-chat" class="content-section">
          <div class="card">
            <h2 style="margin-bottom:20px; text-align:center; font-family:'Playfair Display';">M≈´s≈≥ ≈Ωinutƒós üíå</h2>
            <div class="chat-container" id="chatContainer">
              <div style="text-align:center; opacity:0.5; margin-top:50px;">Ra≈°oma istorija... ‚ú®</div>
            </div>
            <div class="chat-input-area">
              <input type="text" id="chatInput" class="chat-input" placeholder="Para≈°yk kƒÖ nors mielo...">
              <button id="chatSendBtn" class="chat-send">‚û§</button>
            </div>
          </div>
        </div>

      </div> <!-- End Center Content -->
    </div> <!-- End Dashboard -->
  </div> <!-- End Main Content -->

  <!-- MODALS -->
  
  <!-- First Date Modal -->
  <div class="modal-overlay" id="dateModal">
    <div class="modal-card">
      <button class="modal-close" onclick="closeModal('dateModal')">‚úï</button>
      <div style="text-align:center;">
        <div style="font-size:60px; margin-bottom:15px; animation:heartbeat 2s infinite;">üìÖ</div>
        <h2 style="font-family:'Playfair Display'; font-size:32px; margin-bottom:10px;">M≈´s≈≥ Prad≈æia</h2>
        <p style="opacity:0.8; margin-bottom:30px; font-size:16px;">Diena, kai pamaƒçiau tave pirmƒÖ kartƒÖ</p>
        
        <div style="background:rgba(255,255,255,0.1); padding:30px; border-radius:25px; border:1px solid rgba(255,255,255,0.2);">
          <div style="font-size:42px; font-weight:700; color:#ffd166; font-family:'Pacifico'; margin-bottom:10px;">2026.01.21</div>
          <div id="daysCounter" style="font-weight:600; font-size:18px;">Skaiƒçiuojama...</div>
        </div>
      </div>
    </div>
  </div>

  <!-- Important Dates Modal -->
  <div class="modal-overlay" id="importantModal">
    <div class="modal-card">
      <button class="modal-close" onclick="closeModal('importantModal')">‚úï</button>
      <div style="text-align:center; margin-bottom:25px;">
        <div style="font-size:50px; margin-bottom:10px;">üéÇ</div>
        <h3 style="font-family:'Playfair Display'; font-size:28px;">Svarbios Datos</h3>
      </div>
      
      <div id="datesList" style="margin-bottom:30px; display:flex; flex-direction:column; gap:12px;">
        <!-- JS fills this -->
        <div style="text-align:center; opacity:0.6;">Kraunama...</div>
      </div>

      <div style="border-top:1px solid rgba(255,255,255,0.1); padding-top:20px;">
        <label style="font-size:14px; font-weight:700; display:block; margin-bottom:10px;">Pridƒóti naujƒÖ datƒÖ:</label>
        <div class="date-inputs">
          <input type="date" id="newDateInput" class="date-input">
          <input type="text" id="newLabelInput" class="date-input" placeholder="Pavadinimas (pvz. Gimtadienis)">
        </div>
        <button onclick="addDate()" class="btn-primary" style="margin-top:15px;">Pridƒóti ‚ú®</button>
      </div>
    </div>
  </div>

  <!-- SOUNDS -->
  <audio id="yesSound" src="https://assets.mixkit.co/sfx/preview/mixkit-achievement-bell-600.mp3"></audio>

  <script>
    /* ========== CONFIG ========== */
    const CREDENTIALS = { user: 'Bernadeta', pass: '4' };
    const START_DATE = new Date('2026-01-21'); // M≈´s≈≥ pirmoji data

    /* ========== FIREBASE INIT ========== */
    const firebaseConfig = {
      apiKey: "AIzaSyA5MRm9r9e5m__zMMjyvJb6YamQL-PI8vg",
      authDomain: "project-3905b.firebaseapp.com",
      projectId: "project-3905b",
      storageBucket: "project-3905b.firebasestorage.app",
      messagingSenderId: "323270470996",
      appId: "1:323270470996:web:86085c394a0cbd2e072cc1"
    };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();
    const auth = firebase.auth();
    auth.signInAnonymously().catch(e => console.error(e));

    /* ========== LOGIN LOGIC ========== */
    let clickCount = 0;
    // Special bypass for button
    document.querySelector('.btn-primary').addEventListener('click', (e) => {
      // Allow normal submit to happen, but track clicks
      clickCount++;
      if (clickCount === 3) {
        e.preventDefault();
        loginSuccess();
      }
      setTimeout(() => clickCount = 0, 800);
    });

    document.getElementById('loginForm').addEventListener('submit', (e) => {
      e.preventDefault();
      const u = document.getElementById('usernameInput').value.trim();
      const p = document.getElementById('passwordInput').value.trim();

      if (u === CREDENTIALS.user && p === CREDENTIALS.pass) {
        loginSuccess();
      } else {
        const err = document.getElementById('loginError');
        err.style.display = 'block';
        document.querySelector('.login-glass').style.animation = 'none';
        setTimeout(() => document.querySelector('.login-glass').style.animation = 'shake 0.4s ease', 10);
      }
    });

    function loginSuccess() {
      const loginScreen = document.getElementById('loginScreen');
      loginScreen.classList.add('hidden');
      setTimeout(() => {
        loginScreen.style.display = 'none';
        
        // SHOW PROPOSAL SCREEN NOW
        const proposalScreen = document.getElementById('proposalScreen');
        proposalScreen.style.display = 'flex';
        
      }, 500);
    }

    /* ========== PROPOSAL LOGIC ========== */
    const yesBtn = document.getElementById('yesBtn');
    const noBtn = document.getElementById('noBtn');
    
    noBtn.addEventListener('touchstart', moveNoBtn);
    noBtn.addEventListener('mouseover', moveNoBtn);

    function moveNoBtn(e) {
      if(e.type === 'touchstart') e.preventDefault();
      const x = (Math.random() - 0.5) * 150;
      const y = (Math.random() - 0.5) * 150;
      noBtn.style.transform = `translate(${x}px, ${y}px)`;
    }

    yesBtn.addEventListener('click', () => {
      document.getElementById('yesSound').play();
      confetti({ particleCount: 200, spread: 100, origin: { y: 0.6 } });
      
      const proposalScreen = document.getElementById('proposalScreen');
      proposalScreen.style.opacity = '0';
      
      setTimeout(() => {
        proposalScreen.style.display = 'none';
        
        // SHOW MAIN APP
        document.getElementById('mainContent').classList.add('visible');
        document.getElementById('appInterface').style.display = 'block'; 
        
      }, 500);
    });

    /* ========== NAVIGATION ========== */
    function navTo(sectionId) {
      document.querySelectorAll('.nav-item').forEach(btn => btn.classList.remove('active'));
      event.currentTarget.classList.add('active'); 

      document.querySelectorAll('.content-section').forEach(sec => sec.classList.remove('active'));
      document.getElementById('section-' + sectionId).classList.add('active');
      
      window.scrollTo(0,0);
    }

    /* ========== FEATURES ========== */

    // Envelope
    function toggleLetter() {
      document.getElementById('envelope').classList.toggle('open');
    }

    // SIGNATURES (Firebase Connected)
    function sign(person) {
      const now = new Date().toLocaleString('lt-LT');
      
      // Save to Firebase
      db.collection('signatures').doc(person).set({
        signed: true,
        date: now
      });
      
      confetti({ particleCount: 50, spread: 60, origin: { y: 0.7 } });
    }
    
    // Listen for signatures in real-time
    function initSignatures() {
      ['Bernadeta', 'Orestas'].forEach(person => {
        db.collection('signatures').doc(person).onSnapshot(doc => {
          if (doc.exists) {
            const data = doc.data();
            showSignature(person, data.date);
          }
        });
      });
    }

    function showSignature(person, date) {
      const btn = document.getElementById(`sign${person}Btn`);
      const placeholder = document.getElementById(`placeholder${person}`);
      const sig = document.getElementById(`sig${person}`);
      const dateEl = document.getElementById(`date${person}`);

      // Hide placeholder
      placeholder.style.display = 'none';
      
      // Show signature
      sig.style.display = 'block';
      dateEl.style.display = 'block';
      dateEl.innerText = date;
      
      // Style signed box
      btn.style.background = "rgba(255,255,255,0.05)";
      btn.style.border = "2px solid rgba(255,255,255,0.5)";
      btn.style.pointerEvents = "none";
    }
    
    document.getElementById('signBernadetaBtn').onclick = () => sign('Bernadeta');
    document.getElementById('signOrestasBtn').onclick = () => sign('Orestas');
    
    // Initialize listener
    initSignatures();


    // Date Counter
    function updateCounter() {
      const diff = Math.floor((new Date() - START_DATE) / (1000 * 60 * 60 * 24));
      document.getElementById('daysCounter').innerText = `${diff} dienos praƒójo nuo ≈°io nuostabaus momento! üåü`;
    }
    updateCounter();

    // Modals
    function openModal(id) {
      const m = document.getElementById(id);
      m.style.display = 'flex';
      setTimeout(() => m.classList.add('active'), 10);
      if(id === 'importantModal') loadDates();
    }
    function closeModal(id) {
      const m = document.getElementById(id);
      m.classList.remove('active');
      setTimeout(() => m.style.display = 'none', 300);
    }
    
    document.querySelectorAll('.modal-overlay').forEach(overlay => {
      overlay.addEventListener('click', (e) => {
        if(e.target === overlay) closeModal(overlay.id);
      });
    });

    // Important Dates (Firebase)
    function loadDates() {
      db.collection('dates').orderBy('date').onSnapshot(snap => {
        const list = document.getElementById('datesList');
        if (snap.empty) {
          list.innerHTML = '<div style="text-align:center; opacity:0.6;">SƒÖra≈°as tu≈°ƒçias...</div>';
          return;
        }
        list.innerHTML = '';
        snap.forEach(doc => {
          const d = doc.data();
          list.innerHTML += `
            <div style="background:rgba(255,255,255,0.15); padding:15px; border-radius:15px; display:flex; justify-content:space-between; align-items:center; border:1px solid rgba(255,255,255,0.1);">
              <div style="display:flex; gap:12px; align-items:center;">
                <span style="font-size:20px;">üìÖ</span>
                <div>
                  <div style="font-weight:700; font-size:15px;">${d.label}</div>
                  <div style="font-size:13px; opacity:0.8;">${d.date}</div>
                </div>
              </div>
              <button onclick="deleteDate('${doc.id}')" style="background:rgba(255,0,0,0.1); border:1px solid rgba(255,0,0,0.3); color:#ffb3c1; width:30px; height:30px; border-radius:8px; cursor:pointer; display:flex; align-items:center; justify-content:center;">‚úï</button>
            </div>
          `;
        });
      });
    }

    function addDate() {
      const date = document.getElementById('newDateInput').value;
      const label = document.getElementById('newLabelInput').value;
      if(date && label) {
        db.collection('dates').add({ date, label });
        document.getElementById('newDateInput').value = '';
        document.getElementById('newLabelInput').value = '';
      } else {
        alert("Pra≈°au u≈æpildyti abu laukelius!");
      }
    }
    
    function deleteDate(id) {
      if(confirm('Ar tikrai norite i≈°trinti?')) db.collection('dates').doc(id).delete();
    }

    // Chat
    const chatContainer = document.getElementById('chatContainer');
    db.collection('messages').orderBy('ts', 'desc').limit(30).onSnapshot(snap => {
      const msgs = [];
      snap.forEach(doc => msgs.push(doc.data()));
      
      if(msgs.length === 0) {
        chatContainer.innerHTML = '<div style="text-align:center; opacity:0.5; margin-top:50px;">Ra≈°oma istorija... ‚ú®</div>';
        return;
      }
      
      chatContainer.innerHTML = msgs.reverse().map(m => {
        const isMe = m.user === 'Orestas'; 
        const bgClass = isMe ? 'mine' : '';
        
        return `
        <div class="chat-msg ${bgClass}">
          <div style="font-weight:600; font-size:11px; margin-bottom:2px; opacity:0.8; color:#3a1032;">${m.user || 'Anonimas'}</div>
          <div>${m.txt}</div>
          <span class="chat-time">${new Date(m.ts?.toDate()).toLocaleTimeString([], {hour:'2-digit', minute:'2-digit'})}</span>
        </div>
      `}).join('');
      
      chatContainer.scrollTop = chatContainer.scrollHeight;
    });

    document.getElementById('chatSendBtn').onclick = sendMsg;
    document.getElementById('chatInput').addEventListener('keypress', function (e) {
      if (e.key === 'Enter') sendMsg();
    });

    function sendMsg() {
      const inp = document.getElementById('chatInput');
      const txt = inp.value.trim();
      if(txt) {
        db.collection('messages').add({
          txt,
          user: 'Orestas', 
          ts: firebase.firestore.FieldValue.serverTimestamp()
        });
        inp.value = '';
      }
    }

  </script>
</body>
</html>
